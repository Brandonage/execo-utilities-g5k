{
	"id": "/fmonbaseline",
	"groups": [
		{
			"id": "/fmonbaseline/rabbitmq@region@",
			"apps":[
				{
					"id": "/fmonbaseline/rabbitmq@region@/rabbitmqregion",
			  		"cpus": 0.4,
			  		"mem": 1024,
			  		"container": {
			    		"type": "DOCKER",
			    		"docker": {
			      			"network": "HOST",
			      			"image": "rabbitmq:3-alpine",
			      			"forcePullImage": true
			    		}
			  		},
			  		"instances": 1,
			  		"constraints": [["region", "CLUSTER", "region@region@"]]
				}
			]
		},
		{
			"id": "/fmonbaseline/fmonagg@region@",
			"dependencies": ["/fmonbaseline/rabbitmq@region@"],
			"apps":[
				{
					"id": "/fmonbaseline/fmonagg@region@/fmoneagentaggregion@region@",
			  		"cpus": 0.2,
					"mem": 100,
					"container": {
					  "type": "DOCKER",
					  "docker": {
					    "network": "HOST",
					    "image": "alvarobrandon/fmone-agent",
					    "forcePullImage": true
					  },
					"volumes": [
					    {
					      "containerPath": "/proc_host",
					      "hostPath": "/proc",
					      "mode": "RO"
					    },
						{
						  "containerPath" : "/var/run/docker.sock",
						  "hostPath": "/var/run/docker.sock",
						  "mode": "RO"
						}
					  ]
					},
					"args": ["5","1","rabbitmq","inout","console","--mq_machine_in","rabbitmqregion.rabbitmq@region@.fmonbaseline.marathon-user.mesos:5672","--routing_key_in","baseline"],
					"instances": 6,
					"constraints": [["region", "CLUSTER", "region@region@"]]
				}
			]
		},
		{
			"id": "/fmonbaseline/fmonhost",
			"dependencies": ["/fmonbaseline/fmonagg@region@"],
			"apps":[
				{
					"id": "/fmonbaseline/fmonhost/fmoneagenthost",
			  		"cpus": 0.2,
					"mem": 100,
					"container": {
					  "type": "DOCKER",
					  "docker": {
					    "network": "HOST",
					    "image": "alvarobrandon/fmone-agent",
					    "forcePullImage": true
					  },
					"volumes": [
					    {
					      "containerPath": "/proc_host",
					      "hostPath": "/proc",
					      "mode": "RO"
					    },
						{
						  "containerPath" : "/var/run/docker.sock",
						  "hostPath": "/var/run/docker.sock",
						  "mode": "RO"
						}
					  ]
					},
					"args": ["1","1","host","inout","rabbitmq","--mq_machine_out","rabbitmqregion.rabbitmq@region@.fmonbaseline.marathon-user.mesos:5672","--routing_key_out","baseline"],
					"instances": @nslaves@,
					"constraints": [["hostname", "UNIQUE"]]
				}
			]
		},
        {
			"id": "/fmonbaseline/fmondocker",
			"dependencies": ["/fmonbaseline/fmonagg@region@"],
			"apps":[
				{
					"id": "/fmonbaseline/fmondocker/fmoneagentdocker",
			  		"cpus": 0.2,
					"mem": 100,
					"container": {
					  "type": "DOCKER",
					  "docker": {
					    "network": "HOST",
					    "image": "alvarobrandon/fmone-agent",
					    "forcePullImage": true
					  },
					"volumes": [
					    {
					      "containerPath": "/proc_host",
					      "hostPath": "/proc",
					      "mode": "RO"
					    },
						{
						  "containerPath" : "/var/run/docker.sock",
						  "hostPath": "/var/run/docker.sock",
						  "mode": "RO"
						}
					  ]
					},
					"args": ["1","1","docker","inout","rabbitmq","--mq_machine_out","rabbitmqregion.rabbitmq@region@.fmonbaseline.marathon-user.mesos:5672","--routing_key_out","baseline"],
					"instances": @nslaves@,
					"constraints": [["hostname", "UNIQUE"]]
				}
			]
		}
	]
}